{% extends 'base.html.twig' %}

{% block title %}Liste des op√©rations
{% endblock %}

{% block body %}
	<header>
		{% include "/layout/navbar.html.twig" %}
		{% include "/layout/operations_nav.html.twig" %}
		{% include "/layout/search_results.html.twig" %}
	</header>
	<body class="op-terminer-body min-vh-100 ">

		<form method="GET" action="{{ path('app_operation_filter_query', {'status': getUrlStatus}) }}">
			<input type="text" name="query" placeholder="Rechercher par nom de client" required>
			<button type="submit">Rechercher</button>
		</form>
		<main class="text-center">
			<h1>{{ getUrlStatus }}</h1>
			<section class='d-flex flex-wrap m-5 justify-content-center'>
				{% set included_table_op = false %}
				{% for operation in operations %}
					{% if operation.status == getUrlStatus and operation.status != "Terminer" %}

						<div class='card rounded-3 box-shadow m-3 ' style='width: 18rem;'>
							<div class='rounded-top-3 bg-white text-center'>
								<h2>{{ operation.type }}</h2>
							</div>
							<div class='d-flex flex-column h-100 bg-l-green rounded-bottom-3 '>
								<img src='/images/broken_image.svg' alt='operation picture' name='operation_picture' id='operation_picture'/>
                                <div class="d-flex justify-content-center bg-white ">                                
								<h4 class="pt-1">User : {{ operation.user.nom}} {{ operation.user.prenom}}</h4>
                                </div>
								<div class='bg-d-green w-100 rounded-bottom-3 h-100 '>
									<div class='d-flex flex-column  flex-wrap text-white pt-3  '>
                                    <div class="border-bottom d-flex justify-content-center align-items-center">
								    <h4 class="pt-1 ">{{ operation.getClient()}}</h4>
                                    </div>
										<h3>{{operation.getAdresse()}}</h3>
									</div>
								</div>
							</div>

						</div>
					{% else %}
						{% if not included_table_op %}
							{% include "table_op_terminees/index.html.twig" %}
							{% set included_table_op = true %}
						{% endif %}
					{% endif %}
				{% endfor %}
			</section>
		</main>

	</body>
{% endblock %}
