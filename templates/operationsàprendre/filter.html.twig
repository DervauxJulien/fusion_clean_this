{% extends 'base.html.twig' %}

{% block title %}Liste des op√©rations
{% endblock %}

{% block body %}
	<header>
		{% include "/layout/navbar.html.twig" %}
		{% include "/layout/operations_nav.html.twig" %}
		{% include "/layout/search_results.html.twig" %}
	</header>
	<body class="op-terminer-body">

		<form method="GET" action="{{ path('app_operation_filter_query', {'status': getUrlStatus}) }}">
			<input type="text" name="query" placeholder="Rechercher par nom de client" required>
			<button type="submit">Rechercher</button>
		</form>
		<main class="text-center">
			<h1>{{ getUrlStatus }}</h1>
			<section class='d-flex flex-wrap m-5 justify-content-center'>
				{% set included_table_op = false %}
				{% for operation in operations %}
					{% if operation.status == getUrlStatus and operation.status != "Terminer" %}
						<div class='card rounded-3 bg-l-green'>
							<div class='card-title rounded-top-3 bg-white text-center' style='width: 18rem'>
								<h2>{{ operation.type }}</h2>
							</div>
							<div class='d-flex flex-column w-100'>
								<img src='/images/broken_image.svg' alt='operation picture' name='operation_picture' id='operation_picture'/>
								<br><br>
								<h4 class ="text-center">{{ operation.getClient()}}</h4>
								<div class='bg-d-green w-100 rounded-bottom-3 '>
									<div class='operation_localisation'>
										<img src='/images/icons/distance.svg' alt='localisation icon' name='localisation_icon' id='localisation_icon'/>
										<h3>{{operation.getAdresse()}}</h3>
									</div>
								</div>
							</div>

						</div>
					{% else %}
						{% if not included_table_op %}
							{% include "table_op_terminees/index.html.twig" %}
							{% set included_table_op = true %}
						{% endif %}
					{% endif %}
				{% endfor %}
			</section>
		</main>

	</body>
{% endblock %}
